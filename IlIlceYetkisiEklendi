diff --git a/src/app/models/MaksData.ts b/src/app/models/MaksData.ts
index 0af395b8ba9c13f29555cd937d12364cc0638ca7..67ed3bead23e503eb91555c58e5a826e46f7f18a 100644
--- a/src/app/models/MaksData.ts
+++ b/src/app/models/MaksData.ts
@@ -50,6 +50,13 @@ export interface Bina {
 
 }
 
+export class UavtIlIlce {
+    uavtil: number;
+    uavtilce: number;
+    kodilce: number;
+}
+
+
 export interface MaksGeometry {
 
     rings: Array<Array<number[]>>;
diff --git a/src/app/search/maks-adresbinakodu/maks-adresbinakodu.component.html b/src/app/search/maks-adresbinakodu/maks-adresbinakodu.component.html
index 1af8ce74035a35b056ce729782479881b239d9ae..66f72e94b4b2fe536cd24d19de046e974e2542a7 100644
--- a/src/app/search/maks-adresbinakodu/maks-adresbinakodu.component.html
+++ b/src/app/search/maks-adresbinakodu/maks-adresbinakodu.component.html
@@ -23,7 +23,7 @@
         <img src="assets/img/arrow.png" alt="" class="arrow-down">
       </div>
       <div class="select-options">
-        <span class="option" id="{{il.uavtil}}" *ngFor="let il of ilArray"
+        <span class="option" id="{{il.uavtil}}"  *ngFor="let il of ilArray;"
           (mousedown)="onSelect($event)">{{il.ad}}</span>
       </div>
 
diff --git a/src/app/search/maks-adresbinakodu/maks-adresbinakodu.component.ts b/src/app/search/maks-adresbinakodu/maks-adresbinakodu.component.ts
index 7674d6fc83388041b2b99c76f45d2a2a28fc036d..9378ad2f82b1038f694fbb038db309407874235b 100644
--- a/src/app/search/maks-adresbinakodu/maks-adresbinakodu.component.ts
+++ b/src/app/search/maks-adresbinakodu/maks-adresbinakodu.component.ts
@@ -6,7 +6,7 @@ import { DialogRef } from 'src/app/dialog/dialog-ref';
 import { DialogService } from 'src/app/dialog/dialog.service';
 import { MapService } from 'src/app/mapUtils/map.service';
 import { DistrictPermTKGM, UserPermission } from 'src/app/models/Login/user-permission';
-import { MaksData, Il, Csbm } from 'src/app/models/MAKSData';
+import { MaksData, Il, Csbm, Ilce, UavtIlIlce } from 'src/app/models/MAKSData';
 import { SearchFilterObject, TKGMGeometryObject, TKGMParcelRequest } from 'src/app/models/TKGM/tkgm-search-data';
 import { NotificationService } from 'src/app/notification/notification.service';
 import { ProgressInfoComponent } from 'src/app/progress-info/progress-info.component';
@@ -41,6 +41,11 @@ export class MaksAdresbinakoduComponent implements OnInit {
   progressInfoDialogRef: DialogRef;
   _mapView: esri.MapView;
   ilArray: Array<Il> = [];
+  ilceArray: Array<Ilce> = [];
+  permittedCities: Array<string> = [];
+  permittedDistricts: Array<Array<string>> = [];
+  addedDistricts: Array<number> = [];
+  cityCodesOfPermittedDistricts: Array<UavtIlIlce> = [];
   userPerm: UserPermission;
   districtPerm: Array<DistrictPermTKGM> = [];
   pointModule: esri.PointConstructor;
@@ -56,26 +61,10 @@ export class MaksAdresbinakoduComponent implements OnInit {
   ngOnInit() {
 
     this.userPerm = this.auth.userPerm;
+    const permZones = this.userPerm.permZone;
     const mapView = this._mapView;
-    const cityPerm: Array<string> = [];
 
     if (this.userPerm !== undefined) {
-      this.auth.userPerm['permZoneCityTKGM'].map(cityName => {
-        cityPerm.push(cityName.toLocaleUpperCase());
-      });
-
-      this.districtPerm = this.auth.userPerm['permZoneDistrictTKGM'];
-
-      if (this.districtPerm.length > 0) {
-        this.districtPerm.map(perm => {
-          if (!cityPerm.some(city => city === perm['city'].toLocaleUpperCase())) {
-            cityPerm.push(perm['city'].toLocaleUpperCase());
-          }
-        });
-      }
-
-      const permittedCities = [];
-
       const ilLayer: esri.FeatureLayer = <esri.FeatureLayer>mapView.map.allLayers.find(layer => layer.title === 'İl');
       const ilLayerQuery: esri.QueryProperties = {
         where: '1=1',
@@ -93,10 +82,49 @@ export class MaksAdresbinakoduComponent implements OnInit {
           il.uavtil = features[i].attributes['uavtil'];
           this.ilArray.push(il);
         }
+      }).then(x => {
+        if (permZones !== undefined || permZones.length > 0) {
+          permZones.forEach(permZone => {
+            const zone = permZone.zone;
+            if (zone.includes(',')) { // , içerenler izin verilen 1 ilin ilçe listesi demek
+              this.permittedDistricts.push(zone.split(','));
+            } else {
+              this.permittedCities.push(zone);
+            }
+          });
+        }
+        // ilçe sınırlı yetkilerin illerini permittedCities e eklemek için
+        // tslint:disable-next-line:max-line-length
+        if (this.permittedDistricts.length > 0) { // ilçe yetkisi varsa o ilin de select de gözükmesi için il listesine bu ilçenin ilinin bulunup eklenmesi lazım.
+          this.permittedDistricts.forEach(districtArray => {
+            const cityCode = this.findCityCode(districtArray[0]);
+            this.addedDistricts.push(Number(cityCode));
+            this.permittedCities.push(cityCode);
+          });
+        }
+
+        if (this.permittedCities.length === 0) {
+          this.ilArray = [];
+        }
+
+        this.ilArray = this.ilArray.filter(il => this.permittedCities.find(city => Number(city) === il.uavtil));
       });
+
+
+
     }
   }
 
+  findCityCode(districtCode: string) {
+    let cityCode = '';
+    if (districtCode.length === 3) {
+      cityCode = districtCode.slice(0, 1);
+    } else if (districtCode.length === 4) {
+      cityCode = districtCode.slice(0, 2);
+    }
+    return cityCode;
+  }
+
   dispatchMaksAdresBinaKoduSearchClicked(event: Event) {
     this.maksAdresBinaKoduClicked.emit(event);
   }
@@ -170,8 +198,48 @@ export class MaksAdresbinakoduComponent implements OnInit {
     switch (selectName) {
       case 'iller': {
         inputArray[0] = kod;
+        const kodNumber = Number(kod);
+        const where = '';
         dataService.getIlcelerFromMAKS(inputArray[0]).subscribe(res => {
-          this.denemeArray[0].ilceler = res['ilceler'];
+
+          let ilceler: Array<Ilce> = res['ilceler'];
+
+          if (this.addedDistricts.includes(kodNumber)) {
+            if (this.permittedDistricts.length > 0) {
+              this.permittedDistricts.forEach(districtArray => {
+                districtArray.forEach(district => { // buradaki ilcekodları aslında kodilce ye takbül ediyor. bize uavtilce lazım
+                  const cityCodeObject = new UavtIlIlce();
+                  cityCodeObject.kodilce = Number(district);
+                  cityCodeObject.uavtil = Number(this.findCityCode(district));
+
+                  const ilceLayer: esri.FeatureLayer = <esri.FeatureLayer>this._mapView.map.allLayers.find(layer => layer.title === 'İlçe');
+                  const ilceLayerQuery: esri.QueryProperties = {
+                    where: where,
+                    outFields: ['kodilce,uavtil,uavtilce'],
+                    returnGeometry: false,
+                  };
+
+                  ilceLayer.queryFeatures(ilceLayerQuery).then(ilceRes => {
+                    const features = ilceRes.features;
+                    for (let i = 0; i < features.length; i++) {
+                      const kodilce = Number(features[i].attributes['kodilce']);
+                      if (kodilce === cityCodeObject.kodilce) {
+                        cityCodeObject.uavtilce = features[i].attributes['uavtilce'];
+
+                        this.cityCodesOfPermittedDistricts.push(cityCodeObject);
+                      }
+                    }
+                  });
+                });
+              });
+            }
+            ilceler = ilceler.filter(ilce => this.cityCodesOfPermittedDistricts.find(district => district.uavtilce === ilce.kod));
+          }
+
+          // userpermden gelen ilcekodları ilçe layerdaki kodilce fieldına tekabül ediyor. Ancak maks kod olarak uavtilce yi kullanıyor.
+          // o yüzden ilcekodlarının uavtilce kodlarına çevrilmesi lazım.
+
+          this.denemeArray[0].ilceler = ilceler;
         });
         this.denemeArray[0].mahalleler = [];
         this.denemeArray[0].csbmler = [];
diff --git a/src/app/services/web-data.service.ts b/src/app/services/web-data.service.ts
index c75a4549e1df470184a9d189c4e7608f9a6bd21e..4d0d080c1aad06a51b7501a3eb84e2dabb810303 100644
--- a/src/app/services/web-data.service.ts
+++ b/src/app/services/web-data.service.ts
@@ -107,6 +107,17 @@ export class WebDataService {
       { headers: this.auth.createHeader() });
   }
 
+  getIleBagliUavtIlceKodlari(uavtil: number) {
+    const url = 'https://cbs.meb.gov.tr/server/rest/services/mebcbs2023/mebcbs2023/FeatureServer/11/query?where=uavtil' + uavtil +
+    '&outFields=kodilce&returnGeometry=false&f=pjson';
+
+    const deneme =  this.http.get(url , { headers: this.auth.createHeader() }).subscribe(res => {
+      res = res['features']['attributes'];
+    });
+
+    return deneme;
+  }
+
   getIllerFromTKGM() {
     return this.http.get<Array<TKGMData>>(this.tkgmURL + 'getIL', { headers: this.auth.createHeader() });
   }
